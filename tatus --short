1b2a370 2025-10-14 fix: Corregir photos-table con getSupabaseClient y eliminar dependencia problematica - Cambiar de @supabase/auth-helpers-nextjs (deprecated) a getSupabaseClient - Eliminar vehicles de dependencias de useEffect (evita ciclos infinitos) - Soluciona problema de carga en pagina de fotos - Patron consistente con otros componentes corregidos
0f3a175 2025-10-14 fix: Restaurar getSupabaseClient del 8 octubre para solucionar problema de tablas que no cargan - Revertir createClientComponentClient a getSupabaseClient - Eliminar supabase de dependencias de useEffect - Soluciona ciclos infinitos de re-renders - Restaura comportamiento estable del 8 de octubre - 11 componentes corregidos
15675c4 2025-10-14 Fix: Corregir lÃ³gica de asignaciÃ³n de fotos - algoritmo de dÃ©ficit por porcentajes
0576ccd 2025-10-14 fix: Unificar cliente Supabase en componentes de vehÃ­culos para solucionar pÃ©rdida de sesiÃ³n - Cambiar getSupabaseClient a createClientComponentClient en 4 componentes - Soluciona problema de F5 constante y pÃ©rdida de sesiÃ³n - Arreglar .gitignore eliminando error de webpack - Todos los componentes ahora usan el mismo cliente sincronizado
d9bd3bf 2025-10-13 fix: Corregir import del PDF en pÃ¡gina completada - Restaurar import correcto de generateAndDownloadPDF - Corregir nombres de funciones en logs - Arreglar error de compilaciÃ³n
d06dc49 2025-10-13 debug: Investigar por quÃ© el botÃ³n PDF estÃ¡ deshabilitado - Agregar logging detallado para localStorage - Mostrar todas las claves disponibles en localStorage - Indicador visual de por quÃ© el botÃ³n estÃ¡ deshabilitado - Tooltip explicativo en el botÃ³n
ee16f38 2025-10-13 test: Crear pÃ¡gina de test para debug del PDF - PÃ¡gina simple para probar @react-pdf/renderer - Test bÃ¡sico sin dependencias complejas - Logging detallado para identificar el problema
af87f14 2025-10-13 chore: eliminar scripts temporales de diagnostico
5b72856 2025-10-13 fix: corregir logica de vehiculos ausentes y agregar triggers automaticos is_sold
9ebe1d8 2025-10-13 Fix: Cambiar cliente Supabase en stock-table para solucionar carga de datos
dd35616 2025-10-13 fix: Eliminar import de polyfills innecesario
1224675 2025-10-13 fix: Simplificar logica BANCO - vacio=CONTADO, resto=FINANCIADO
cf03c6e 2025-10-13 fix: Mejorar regex para extraer campos sin texto extra
c68076b 2025-10-13 fix: pdf.js desde CDN
e66d83a 2025-10-13 fix: Importar pdfjs-dist dinamicamente
92bff2c 2025-10-13 fix: Procesar PDF en CLIENTE (navegador) en lugar de servidor - Extraer texto con pdfjs-dist en el navegador (donde DOMMatrix existe) - Enviar solo texto al servidor, no archivo - Eliminar dependencia de DOMMatrix en servidor - SoluciÃ³n definitiva sin polyfills - No afecta tasaciones ni otros features
79a676c 2025-10-13 fix: Cargar DOMMatrix polyfill mediante instrumentation hook de Next.js
1fed075 2025-10-13 fix: Instalar paquete dommatrix para DOMMatrix en Node.js
24844a4 2025-10-13 fix: Migrar de pdf-parse a pdfjs-dist sin DOMMatrix
04f132b 2025-10-13 fix: ELIMINAR canvas completamente - pdf-parse solo texto sin renderizado - Remover canvas de package.json (innecesario para extracciÃ³n de texto) - Configurar webpack para bloquear canvas (canvas: false) - pdf-parse funcionarÃ¡ sin dependencias nativas - SoluciÃ³n definitiva sin DOMMatrix
749f3ce 2025-10-13 fix: Degradar canvas a 2.11.2 para eliminar dependencia de DOMMatrix - Cambiar canvas de 3.1.2 a 2.11.2 (Ãºltima versiÃ³n sin DOMMatrix) - Vercel compilarÃ¡ correctamente en entorno Linux - SoluciÃ³n definitiva para procesamiento de PDFs en producciÃ³n
6235541 2025-10-13 fix: Deshabilitar pagerender en pdf-parse para evitar error DOMMatrix - Configurar pagerender: async () => '' para solo extraer texto - Eliminar polyfill DOMMatrix innecesario - Solo extraer texto de PDFs, sin renderizado de imÃ¡genes - Soluciona definitivamente: ReferenceError: DOMMatrix is not defined
af3fc9a 2025-10-13 fix: Mejorar polyfill DOMMatrix con implementaciÃ³n completa - ImplementaciÃ³n funcional de DOMMatrix con propiedades y mÃ©todos - Agregar DOMPoint con constructor funcional - Soluciona: TypeError: Class constructors cannot be invoked without 'new'
3c4632f 2025-10-13 fix: Agregar polyfill DOMMatrix para solucionar error en procesamiento de PDFs - Polyfill de DOMMatrix y DOMPoint en pdf-text-extractor.ts - Mejorar configuraciÃ³n webpack para canvas y pdf-parse - Agregar serverExternalPackages y fallbacks necesarios - Soluciona: ReferenceError: DOMMatrix is not defined
3640262 2025-10-13 fix: eliminar filtro incorrecto .neq('estado', 'entregado') en consultas de stock
49ae574 2025-10-12 fix: Debug y simplificar generaciÃ³n de PDF - Crear SimpleTasacionPDF para simplificar la generaciÃ³n - Agregar logging extensivo para debug del proceso - Reemplazar TasacionPDF complejo con versiÃ³n simple - Mejorar manejo de errores y mensajes informativos
056815d 2025-10-12 feat: Mejorar UX mÃ³vil con teclado numÃ©rico automÃ¡tico - Agregar inputMode='numeric' y pattern='[0-9]*' al campo prÃ³xima ITV - Agregar inputMode='numeric' al campo kilÃ³metros actuales - Agregar inputMode='text' al campo matrÃ­cula - Optimizar experiencia de entrada en dispositivos mÃ³viles
6b04a42 2025-10-12 feat: Integrar backoffice de tasaciones en el dashboard de CVO - Crear nueva pÃ¡gina de tasaciones en /dashboard/tasaciones - Integrar con el layout y estilo del dashboard de CVO - Usar componentes UI consistentes (Card, Badge, Button, etc.) - Implementar breadcrumbs y navegaciÃ³n integrada - Agregar funcionalidades de bÃºsqueda y filtrado - Actualizar enlaces en sidebar desktop y mÃ³vil - Eliminar backoffice anterior independiente
c983130 2025-10-12 fix: Agregar todos los archivos SVG al repositorio - Incluir arriba.svg, cuentakm.svg, frontal.svg, interiordelantero.svg, interiortrasero.svg, lateral.svg, trasera.svg - Forzar add para archivos SVG ignorados por .gitignore
97cb1b3 2025-10-12 feat: Metadatos especÃ­ficos para portal de tasaciones y campo ITV obligatorio - Configurar metadatos OpenGraph y Twitter para preview especÃ­fico de tasaciones - Crear icono personalizado para tasaciones (tasaciones-icon.svg) - Hacer campo prÃ³xima ITV obligatorio con formato MM/AAAA - Actualizar validaciÃ³n para requerir prÃ³xima ITV siempre - Mejorar UX con auto-scroll y formateo automÃ¡tico
